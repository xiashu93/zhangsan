<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>用户注册页面</title>
    <link rel="stylesheet" href="login/css/layui.css">
    <link rel="stylesheet" href="login/css/style.css">
    <script src="login/layui.js"></script>
    <script type="text/javascript" src="js/jquery-3.3.1.js"></script>
    <style type="text/css">
        body {
            background-image: url(login/img/background1.jpg);
            background-repeat: no-repeat;
            background-size: 100%;
        }
    </style>
</head>
<body>
<div class="login-main">
    <header class="layui-elip" style="width: 82%">注册页</header>

    <!-- 表单选项 -->
    <form class="layui-form" id="form" onsubmit="return false;">
        <div class="layui-input-inline">
            <!-- 用户名 -->
            <div class="layui-inline" style="width: 85%">
                <input type="text" id="uname" name="name" required lay-verify="required" placeholder="请输入用户名" autocomplete="off" class="layui-input">
            </div>
            <!-- 对号 -->
            <div class="layui-inline">
                <i class="layui-icon" id="ri" style="color: green;font-weight: bolder;" hidden></i>
            </div>
            <!-- 错号 -->
            <div class="layui-inline">
                <i class="layui-icon" id="wr" style="color: red; font-weight: bolder;" hidden>ဆ</i>
            </div>
        </div>

        <!-- 密码 -->
        <div class="layui-input-inline">
            <div class="layui-inline" style="width: 85%">
                <input type="password" id="pwd" name="password" required lay-verify="required|password" placeholder="请输入密码" autocomplete="off" class="layui-input">
            </div>
            <!-- 对号 -->
            <div class="layui-inline">
                <i class="layui-icon" id="pri" style="color: green;font-weight: bolder;" hidden></i>
            </div>
            <!-- 错号 -->
            <div class="layui-inline">
                <i class="layui-icon" id="pwr" style="color: red; font-weight: bolder;" hidden>ဆ</i>
            </div>
        </div>
        <!-- 确认密码 -->
        <div class="layui-input-inline">
            <div class="layui-inline" style="width: 85%">
                <input type="password" id="rpwd" name="repassword" required lay-verify="required|repassword" placeholder="请确认密码" autocomplete="off" class="layui-input">
            </div>
            <!-- 对号 -->
            <div class="layui-inline">
                <i class="layui-icon" id="rpri" style="color: green;font-weight: bolder;" hidden></i>
            </div>
            <!-- 错号 -->
            <div class="layui-inline">
                <i class="layui-icon" id="rpwr" style="color: red; font-weight: bolder;" hidden>ဆ</i>
            </div>
        </div>

        <!-- 电话 -->
        <div class="layui-input-inline">
            <div class="layui-inline" style="width: 85%">
                <input type="text" id="phone" name="phone" required lay-verify="required|phone" placeholder="请输入您的手机号" autocomplete="off" class="layui-input">
            </div>
        </div>


        <div class="layui-input-inline login-btn" style="width: 85%">
            <button type="submit" lay-submit lay-filter="sub" class="layui-btn">注册</button>
        </div>
        <hr style="width: 85%" />
        <p style="width: 85%">
            <a href="login.html" class="fl">已有账号？立即登录</a>
        </p>


    </form>

    <script type="text/javascript">
        layui.use(['form', 'layer'], function() {
            var form = layui.form;
            var layer = layui.layer;

            //添加表单监听事件，验证输入信息是否合理
            form.on('submit(sub)', function() {
                var fd = new FormData(document.getElementById("form"));

                $.ajax({
                    type:"post",
                    url:"/votesys/user/register.do",
                    data:$("form").serialize(),
                    success:function(data){
                        if(data.code == 1){
                            layer.msg('注册成功');
                            window.location.href="login.html";
                        }else{
                            layer.msg('注册失败');
                            window.location.href="register.html";
                        }
                    },
                    error:function(){
                        layer.msg('请求异常');
                    }
                })
            })
        })
    </script>

</div>
</body>
</html>